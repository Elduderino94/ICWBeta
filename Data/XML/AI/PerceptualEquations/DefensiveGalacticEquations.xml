<?xml version="1.0" ?>

<Equations>

	<Needs_Blockade_Lifted>
		(Variable_Target.EnemyForce.HasSpaceForce)
		*
		Function_First_Attack_Allowed.Evaluate
		*
		(Variable_Target.EnemyForce.SpaceTotalUnnormalized > 0)
		*
		(30 +
		(10.0 * Function_GenericPlanetValue.Evaluate))
		*
		((Function_Need_To_Reconnect_Islands.Evaluate == 0.0) +
		Variable_Target.ConnectsLargestIslands)
		*
		(Variable_Target.TimeSinceSpaceConflict > Function_Blockade_Wait_Time.Evaluate)
	</Needs_Blockade_Lifted>

	
	<Blockade_Wait_Time>
		Variable_Self.IsDifficulty{Parameter_Difficulty_Level_Type = DifficultyLevelType[Easy]}
		* 40.0
		+
		Variable_Self.IsDifficulty{Parameter_Difficulty_Level_Type = DifficultyLevelType[Normal]}
		* 20.0
		+
		Variable_Self.IsDifficulty{Parameter_Difficulty_Level_Type = DifficultyLevelType[Hard]}			
	</Blockade_Wait_Time>


	<Needs_Space_Defensive_Structure>
		50.0 *
		Variable_Target.OpenStructureSlots *
		(Variable_Target.StarbaseLevel == Variable_Target.MaxStarbaseLevel) *
		Variable_Target.FriendlyForce.SpaceTotalNBTD *
		(1.0 + Function_DefensiveValue.Evaluate)
		+
		8.0 * Function_Planet_Has_Capital_Building.Evaluate
	</Needs_Space_Defensive_Structure>
	
	
	<Needs_Space_Super_Station>
		(50.0 *
		Variable_Target.OpenStructureSlots *
		Variable_Target.StarbaseLevelUnnormalized *
		Variable_Target.FriendlyForce.SpaceTotalNBTD *
		(1.0 + Function_DefensiveValue.Evaluate)
		+
		8.0 * Function_Planet_Has_Capital_Building.Evaluate)
		*
		(5 > Variable_Self.StructureCount {Parameter_Type = "Oto", Parameter_Type = "Validusia", Parameter_Type = "Empress_Station", Parameter_Only_Consider_Complete = 1.0})
		*
		Variable_Self.IsFaction {Parameter_Faction = "Rebel", Parameter_Faction = "Underworld", Parameter_Faction = "Pentastar", Parameter_Faction = "Hutts", Parameter_Faction = "Pirates", Parameter_Faction = "Empire"}
	</Needs_Space_Super_Station>
	

	<DefensiveValue>
		(1.0 - Variable_Target.EnemyForce.SpaceTotalNBTT) *
		(Function_GenericPlanetValue.Evaluate + 
		Variable_Target.ActiveTradeRoutes + 
		Variable_Target.EnemyForce.NearbyGroundTotal + Variable_Target.EnemyForce.NearbySpaceTotal -
		Variable_Target.FriendlyForce.GroundTotal - Variable_Target.FriendlyForce.SpaceTotal)
		+
		Variable_Target.Hints.Chokepoint
		+ 
		Variable_Target.Hints.PriorityTarget			
	</DefensiveValue>

	
	<Needs_Weapon>
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			2.0 * Function_Is_Connected_To_Enemy.Evaluate
			+
			4.0 * (Variable_Target.Hints.Chokepoint + Variable_Target.Hints.PriorityTarget)
			+
			Function_GenericPlanetValue.Evaluate
			+
			0.2 * Variable_Target.StarbaseLevelUnnormalized
			+
			1.5 * Variable_Target.FriendlyForce.SpaceTotalNBTD
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
		)
		*
		(2.0 - Variable_Target.StructureCount {Parameter_Type = "Ground_Ion_Cannon", Parameter_Type = "Ground_Empire_Hypervelocity_Gun", Parameter_Only_Consider_Complete = 1.0}) / 2.0
		*
		0.5 * Variable_Target.BaseIncomeNBTP
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
	</Needs_Weapon>

	
	<Needs_Base_Shield>
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			2.0 * Function_Is_Connected_To_Enemy.Evaluate
			+
			4.0 * (Variable_Target.Hints.Chokepoint + Variable_Target.Hints.PriorityTarget)
			+
			Function_GenericPlanetValue.Evaluate
			+
			0.25 * (Variable_Target.MaxGroundBaseLevelUnnormalized - Function_Open_Ground_Structure_Slots.Evaluate)
			+
			1.5 * Variable_Target.FriendlyForce.GroundTotalNBTD
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
		)
		*
		(Variable_Target.HasStructure {Parameter_Type = "E_Ground_Base_Shield", Parameter_Type = "R_Ground_Base_Shield", Parameter_Only_Consider_Complete = 1.0} == 0.0)
		*
		0.5 * Variable_Target.BaseIncomeNBTP
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
	</Needs_Base_Shield>

	
	<Needs_Turbolasers>
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			2.0 * Function_Is_Connected_To_Enemy.Evaluate
			+
			4.0 * (Variable_Target.Hints.Chokepoint + Variable_Target.Hints.PriorityTarget)
			+
			Function_GenericPlanetValue.Evaluate
			+
			0.5 * (Variable_Target.MaxGroundBaseLevelUnnormalized - Function_Open_Ground_Structure_Slots.Evaluate)
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
		)
		*
		(Variable_Target.HasStructure {Parameter_Type = "E_Galactic_Turbolaser_Tower_Defenses", Parameter_Type = "R_Galactic_Turbolaser_Tower_Defenses", Parameter_Only_Consider_Complete = 1.0} == 0.0)
		*
		0.5 * Variable_Target.BaseIncomeNBTP
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
	</Needs_Turbolasers>

	
	<Defense_Level>
		Variable_Target.StarbaseLevelUnnormalized 
		+ Variable_Target.HasStructure {Parameter_Type = "Rebel_Golan_One"}
		+ Variable_Target.HasStructure {Parameter_Type = "Rebel_Golan_Two"}
		+ Variable_Target.HasStructure {Parameter_Type = "Rebel_Golan_Two_Strategic"}
		+ Variable_Target.HasStructure {Parameter_Type = "Rebel_Golan_Three"}
		+ Variable_Target.HasStructure {Parameter_Type = "Rebel_Golan_Three_Strategic"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empire_Golan_One"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empire_Golan_Two"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empire_Golan_Two_Strategic"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empire_Golan_Three"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empire_Golan_Three_Strategic"}
		+ Variable_Target.HasStructure {Parameter_Type = "Oto"}
		+ Variable_Target.HasStructure {Parameter_Type = "Visvia"}
		+ Variable_Target.HasStructure {Parameter_Type = "Brask"}
		+ Variable_Target.HasStructure {Parameter_Type = "NewRep_XQ"}
		+ Variable_Target.HasStructure {Parameter_Type = "Validusia"}
		+ Variable_Target.HasStructure {Parameter_Type = "Empress_Station"}
		+ Variable_Target.HasStructure {Parameter_Type = "Ground_Ion_Cannon"}
		+ Variable_Target.HasStructure {Parameter_Type = "Ground_Empire_Hypervelocity_Gun"}
		+ Variable_Target.HasStructure {Parameter_Type = "Ground_Pentastar_Hypervelocity_Gun"}
		+ Variable_Target.HasStructure {Parameter_Type = "E_Ground_Base_Shield", Parameter_Count = 1}
		+ Variable_Target.HasStructure {Parameter_Type = "R_Ground_Base_Shield", Parameter_Count = 1}
		+ Variable_Target.HasStructure {Parameter_Type = "E_Galactic_Turbolaser_Tower_Defenses", Parameter_Count = 1}
		+ Variable_Target.HasStructure {Parameter_Type = "R_Galactic_Turbolaser_Tower_Defenses", Parameter_Count = 1}
		+ Variable_Target.HasStructure {Parameter_Type = "U_Galactic_Turbolaser_Tower_Defenses", Parameter_Count = 1}
		+ Variable_Target.HasStructure {Parameter_Type = "Y_Galactic_Turbolaser_Tower_Defenses", Parameter_Count = 1}	
	</Defense_Level>

	
	<Can_Park_Ground_Unit>
		(Variable_Target.EnemyForce.HasSpaceForce == 0.0) 
		*
		(Variable_Target.OpenGroundCompanySlots > 0)
		*
		Variable_Target.IsSurfaceAccessible
	</Can_Park_Ground_Unit>
	
	
	<Low_Ground_Defense_Score>
		(1.0 - Variable_Target.FriendlyForce.GroundTotalNBTD)
		*
		Function_Can_Park_Ground_Unit.Evaluate
	</Low_Ground_Defense_Score>

	
	<Low_Space_Defense_Score>
		(1.0 - Variable_Target.FriendlyForce.SpaceTotalNBTD)
		*
		Function_Is_Connected_To_Enemy.Evaluate
	</Low_Space_Defense_Score>

	
	<Recent_Conversion>
		(1.0 - (Variable_Target.TimeSinceConversion > 120.0)) * (120.0 - Variable_Target.TimeSinceConversion) / 120.0
	</Recent_Conversion>
	
	
	<Ground_Priority_Defense_Score>
		(
			Variable_Target.Hints.Chokepoint
			+
			Variable_Target.Hints.PriorityTarget
			+
			Function_GenericPlanetValue.Evaluate
			+
			2.0 * Function_Is_Connected_To_Enemy.Evaluate
			+
			2.0 * (Variable_Target.TradeRoutes - Variable_Target.ActiveTradeRoutes)
			+
			Variable_Target.HasStructure {Parameter_Type = "E_Ground_Base_Shield", Parameter_Type = "R_Ground_Base_Shield",
											Parameter_Type = "E_Galactic_Turbolaser_Tower_Defenses", Parameter_Type = "R_Galactic_Turbolaser_Tower_Defenses",
											Parameter_Type = "U_Galactic_Turbolaser_Tower_Defenses", Parameter_Type = "Y_Galactic_Turbolaser_Tower_Defenses"}
			+
			2.0 * Function_Recent_Conversion.Evaluate * Function_Self_Present.Evaluate * Function_Is_Connected_To_Enemy.Evaluate
			+
			Function_Recent_Conflict_Ground.Evaluate * Function_Self_Present.Evaluate * Function_Is_Connected_To_Enemy.Evaluate
			+
			Function_Recent_Conflict_Space.Evaluate * Function_Self_Present.Evaluate * Function_Is_Connected_To_Enemy.Evaluate
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
		)
		*
		Function_Can_Park_Ground_Unit.Evaluate
	</Ground_Priority_Defense_Score>

	
	<Space_Priority_Defense_Score>
		Variable_Target.Hints.Chokepoint
		+
		Variable_Target.Hints.PriorityTarget
		+
		2.0 * Function_Is_Connected_To_Enemy.Evaluate
		+
		2.0 * (Variable_Target.TradeRoutes - Variable_Target.ActiveTradeRoutes)
		+
		Function_GenericPlanetValue.Evaluate
		+
		Variable_Target.HasStructure {Parameter_Type = "Ground_Ion_Cannon", Parameter_Type = "Ground_Empire_Hypervelocity_Gun", Parameter_Type = "Ground_Pentastar_Hypervelocity_Gun"}
		+
		2.0 * Function_Planet_Has_Capital_Building.Evaluate
		+
		2.0 * Function_Recent_Conversion.Evaluate * Function_Self_Present.Evaluate * Function_Is_Connected_To_Enemy.Evaluate
		+
		Function_Recent_Conflict_Space.Evaluate * Function_Self_Present.Evaluate * Function_Is_Connected_To_Enemy.Evaluate
	</Space_Priority_Defense_Score>

	
	<Ground_Staging_Planet>
		Variable_Target.StarbaseLevelUnnormalized
		*
		(1 - Function_Is_Connected_To_Enemy.Evaluate)
		*
		Function_Friendly_Space_Unit_Raw_Total.Evaluate
	</Ground_Staging_Planet>
	
	
	<Friendly_Space_Unit_Raw_Total>
		Variable_Target.FriendlyForce.SpaceTotalUnnormalized
	</Friendly_Space_Unit_Raw_Total>

	
	<Friendly_Global_Space_Unit_Raw_Total>
		Variable_Self.SpaceTotalUnnormalized
	</Friendly_Global_Space_Unit_Raw_Total>

	
	<Friendly_Land_Unit_Raw_Total>
		Variable_Target.FriendlyForce.GroundTotalUnnormalized
	</Friendly_Land_Unit_Raw_Total>

	
	<Friendly_Global_Land_Unit_Raw_Total>
		Variable_Self.GroundTotalUnnormalized
	</Friendly_Global_Land_Unit_Raw_Total>
	
	
	<Enemy_Global_Space_Unit_Raw_Total>
		Game.EnemyForce.SpaceTotalUnnormalized
	</Enemy_Global_Space_Unit_Raw_Total>

	
	<Enemy_Global_Land_Unit_Raw_Total>
		Game.EnemyForce.GroundTotalUnnormalized
	</Enemy_Global_Land_Unit_Raw_Total>
	
	
	<Needs_Defensive_Fleet>
		20.0
		*
		Function_Is_Connected_To_Me.Evaluate
		*
		Variable_Target.EnemyForce.SpaceTotalNBPTM
		*
		Variable_Self.AnyCurrentThreats
	</Needs_Defensive_Fleet>
	
	
</Equations>
